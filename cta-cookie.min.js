"use strict";const cookieConfig={mode:"opt-in",cookieMaxAge:180,debugMode:!1,consentMode:!0,categories:{essential:!0,analytics:!1,marketing:!1,personalization:!1,uncategorized:!1}},cookieManager={setCookie:(e,o,n)=>{let t="";if(n){const e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),t="; expires="+e.toUTCString()}document.cookie=e+"="+(o||"")+t+"; path=/; SameSite=None; Secure"},getCookie:e=>{const o=e+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let t=n[e];for(;" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(o))return t.substring(o.length,t.length)}return null},eraseCookie:e=>{document.cookie=e+"=; Max-Age=-99999999; path=/; SameSite=None; Secure"},clearAllCookies:()=>{const e=document.cookie.split("; ");for(let o=0;o<e.length;o++){const n=e[o].split("=")[0];document.cookie=n+"=; Max-Age=-99999999; path=/; SameSite=None; Secure"}}},resetCookies=()=>{cookieManager.clearAllCookies(),cookieAnimation.closeCookiePreferences(),console.log("Tutti i cookie sono stati cancellati e il banner Ã¨ stato chiuso."),location.reload()},resetButton=document.querySelector("[cta='reset']");resetButton&&resetButton.addEventListener("click",resetCookies);const uiManager={showBanner:()=>{document.querySelector("#banner-cookie")&&cookieAnimation.animateBanner()},hideBanner:()=>{document.querySelector("#banner-cookie")&&cookieAnimation.animateBannerClose()},closeBannerWithoutConsent:()=>{document.querySelector("#banner-cookie")&&cookieAnimation.animateBannerClose()},handlePreferences:()=>{document.querySelector("#cookie-preferences")&&cookieAnimation.cookiePreferences()}};cookieManager.getCookie("cta")||uiManager.showBanner();const consentManager={allowAll:()=>{cookieManager.setCookie("cta",JSON.stringify({essential:!0,analytics:!0,marketing:!0,personalization:!0}),cookieConfig.cookieMaxAge),gtmManager.fireGTMEvent("allCookiesAccepted"),uiManager.hideBanner(),cookieAnimation.closeCookiePreferences()},denyAll:()=>{cookieManager.setCookie("cta",JSON.stringify({essential:!0,analytics:!1,marketing:!1,personalization:!1}),cookieConfig.cookieMaxAge),gtmManager.fireGTMEvent("allCookiesDenied"),uiManager.hideBanner(),cookieAnimation.closeCookiePreferences()},handleFormSubmit:e=>{e.preventDefault();const o=document.querySelector("#cookie-analytics"),n=document.querySelector("#cookie-marketing"),t=document.querySelector("#cookie-personalization"),i={essential:!0,analytics:!!o&&o.checked,marketing:!!n&&n.checked,personalization:!!t&&t.checked};cookieManager.setCookie("cta",JSON.stringify(i),cookieConfig.cookieMaxAge),gtmManager.updateConsentMode(i),cookieAnimation.closeCookiePreferences()}},allowButtons=document.querySelectorAll("[cta='allow']");allowButtons.length>0&&allowButtons.forEach((e=>{e.addEventListener("click",consentManager.allowAll)}));const denyButtons=document.querySelectorAll("[cta='deny']");denyButtons.length>0&&denyButtons.forEach((e=>{e.addEventListener("click",consentManager.denyAll)}));const openPreferencesButtons=document.querySelectorAll("[cta='open-preferences']");openPreferencesButtons.length>0&&openPreferencesButtons.forEach((e=>{e.addEventListener("click",(()=>{uiManager.closeBannerWithoutConsent(),uiManager.handlePreferences()}))}));const preferencesForm=document.querySelector("#wf-form-Cookie-Preferences-form");preferencesForm&&preferencesForm.addEventListener("submit",consentManager.handleFormSubmit);const preferencesCloseButton=document.querySelector("#preferences-close");preferencesCloseButton&&preferencesCloseButton.addEventListener("click",cookieAnimation.closeCookiePreferences);const submitButton=document.querySelector("[cta='submit']");submitButton&&submitButton.addEventListener("click",(e=>{e.preventDefault(),consentManager.handleFormSubmit(e)}));const closeButton=document.querySelector("#banner-close");closeButton&&closeButton.addEventListener("click",uiManager.closeBannerWithoutConsent);const gtmManager={fireGTMEvent:e=>{window.dataLayer&&(window.dataLayer.push({event:e}),cookieConfig.debugMode&&console.log(`Evento GTM ${e} inviato.`))},updateConsentMode:e=>{cookieConfig.consentMode&&window.gtag&&(window.gtag("consent","update",{ad_storage:e.marketing?"granted":"denied",analytics_storage:e.analytics?"granted":"denied",functionality_storage:e.personalization?"granted":"denied"}),cookieConfig.debugMode&&console.log("Google Consent Mode aggiornato:",e))}};