"use strict";const cookieConfig={mode:"opt-in",cookieMaxAge:180,debugMode:!1,consentMode:!0,categories:{essential:!0,analytics:!1,marketing:!1,personalization:!1,uncategorized:!1}},cookieManager={setCookie:(e,o,n)=>{let t="";if(n){const e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),t="; expires="+e.toUTCString()}document.cookie=e+"="+(o||"")+t+"; path=/; SameSite=None; Secure"},getCookie:e=>{const o=e+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let t=n[e];for(;" "===t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(o))return t.substring(o.length,t.length)}return null},eraseCookie:e=>{document.cookie=e+"=; Max-Age=-99999999; path=/; SameSite=None; Secure"},clearAllCookies:()=>{const e=document.cookie.split("; ");for(let o=0;o<e.length;o++){const n=e[o].split("=")[0];document.cookie=n+"=; Max-Age=-99999999; path=/; SameSite=None; Secure"}}},resetCookies=()=>{cookieManager.clearAllCookies(),closeCookiePreferences(),console.log("Tutti i cookie sono stati cancellati e il banner Ã¨ stato chiuso."),location.reload()},resetButton=document.querySelector("[cta='reset']");resetButton&&resetButton.addEventListener("click",resetCookies);const uiManager={showBanner:()=>{document.querySelector("#banner-cookie")&&animateBanner()},hideBanner:()=>{document.querySelector("#banner-cookie")&&animateBannerClose()},closeBannerWithoutConsent:()=>{document.querySelector("#banner-cookie")&&animateBannerClose()},handlePreferences:()=>{document.querySelector("#cookie-preferences")&&cookiePreferences()}};cookieManager.getCookie("cta")||uiManager.showBanner();const consentManager={allowAll:()=>{cookieManager.setCookie("cta",JSON.stringify({essential:!0,analytics:!0,marketing:!0,personalization:!0}),cookieConfig.cookieMaxAge),gtmManager.fireGTMEvent("allCookiesAccepted"),uiManager.hideBanner(),closeCookiePreferences()},denyAll:()=>{cookieManager.setCookie("cta",JSON.stringify({essential:!0,analytics:!1,marketing:!1,personalization:!1}),cookieConfig.cookieMaxAge),gtmManager.fireGTMEvent("allCookiesDenied"),uiManager.hideBanner(),closeCookiePreferences()},handleFormSubmit:e=>{e.preventDefault();const o=document.querySelector("#cookie-analytics"),n=document.querySelector("#cookie-marketing"),t=document.querySelector("#cookie-personalization"),a={essential:!0,analytics:!!o&&o.checked,marketing:!!n&&n.checked,personalization:!!t&&t.checked};cookieManager.setCookie("cta",JSON.stringify(a),cookieConfig.cookieMaxAge),gtmManager.updateConsentMode(a),closeCookiePreferences()}},allowButtons=document.querySelectorAll("[cta='allow']");allowButtons.length>0&&allowButtons.forEach((e=>{e.addEventListener("click",consentManager.allowAll)}));const denyButtons=document.querySelectorAll("[cta='deny']");denyButtons.length>0&&denyButtons.forEach((e=>{e.addEventListener("click",consentManager.denyAll)}));const openPreferencesButtons=document.querySelectorAll("[cta='open-preferences']");openPreferencesButtons.length>0&&openPreferencesButtons.forEach((e=>{e.addEventListener("click",(()=>{uiManager.closeBannerWithoutConsent(),uiManager.handlePreferences()}))}));const preferencesForm=document.querySelector("#wf-form-Cookie-Preferences-form");preferencesForm&&preferencesForm.addEventListener("submit",consentManager.handleFormSubmit);const preferencesCloseButton=document.querySelector("#preferences-close");preferencesCloseButton&&preferencesCloseButton.addEventListener("click",closeCookiePreferences);const submitButton=document.querySelector("[cta='submit']");submitButton&&submitButton.addEventListener("click",(e=>{e.preventDefault(),consentManager.handleFormSubmit(e)}));const closeButton=document.querySelector("#banner-close");closeButton&&closeButton.addEventListener("click",uiManager.closeBannerWithoutConsent);const gtmManager={fireGTMEvent:e=>{window.dataLayer&&(window.dataLayer.push({event:e}),cookieConfig.debugMode&&console.log(`Evento GTM ${e} inviato.`))},updateConsentMode:e=>{cookieConfig.consentMode&&window.gtag&&(window.gtag("consent","update",{ad_storage:e.marketing?"granted":"denied",analytics_storage:e.analytics?"granted":"denied",functionality_storage:e.personalization?"granted":"denied"}),cookieConfig.debugMode&&console.log("Google Consent Mode aggiornato:",e))}};function animateBanner(){const e=document.getElementById("banner-cookie");e&&gsap.fromTo(e,{y:"10rem",display:"none"},{y:"0rem",display:"flex",duration:1,delay:3,ease:"power2.inOut"})}function animateBannerClose(){const e=document.querySelector("#banner-cookie");e&&gsap.to(e,{y:"10rem",duration:.5,ease:"power2.inOut",onComplete:()=>{e.style.display="none"}})}function cookiePreferences(){const e=document.querySelector("#cookie-preferences");e&&(e.style.display="flex",gsap.to(e,{opacity:1,duration:.5,ease:"power2.inOut"}))}function closeCookiePreferences(){const e=document.querySelector("#cookie-preferences");e&&gsap.to(e,{opacity:0,duration:.5,ease:"power2.inOut",onComplete:()=>{e.style.display="none"}})}document.addEventListener("DOMContentLoaded",(()=>{const toggleCheckboxAnimation=(e,o,n,t,a)=>{const i=document.querySelector(e),r=document.querySelector(`[cta-checkbox='${o}']`),c=r?.querySelector(`[cta-toggle='${n}']`);i&&r&&c?(i.checked=a,a?(gsap.to(c,{x:20,duration:.3,ease:"power2.inOut"}),gsap.to(r,{backgroundColor:"#ff006e",duration:.3,ease:"power2.inOut"})):(gsap.to(c,{x:0,duration:.3,ease:"power2.inOut"}),gsap.to(r,{backgroundColor:"",duration:.3,ease:"power2.inOut"})),i.addEventListener("click",(()=>{i.checked?(gsap.to(c,{x:20,duration:.3,ease:"power2.inOut"}),gsap.to(r,{backgroundColor:"#ff006e",duration:.3,ease:"power2.inOut"})):(gsap.to(c,{x:0,duration:.3,ease:"power2.inOut"}),gsap.to(r,{backgroundColor:"",duration:.3,ease:"power2.inOut"}));const e=JSON.parse(cookieManager.getCookie("cta"))||{essential:!0,analytics:!1,marketing:!1,personalization:!1};e[t]=i.checked,cookieManager.setCookie("cta",JSON.stringify(e),cookieConfig.cookieMaxAge)}))):console.warn(`Elemento non trovato per l'animazione del checkbox: ${t}`)},toggleAllCheckboxes=e=>{toggleCheckboxAnimation("#cookie-marketing","marketing","marketing","marketing",e),toggleCheckboxAnimation("#cookie-analytics","analytics","analytics","analytics",e),toggleCheckboxAnimation("#cookie-personalization","personalization","personalization","personalization",e);const o={essential:!0,analytics:e,marketing:e,personalization:e};cookieManager.setCookie("cta",JSON.stringify(o),cookieConfig.cookieMaxAge)},e=document.querySelectorAll("[cta='allow']");e.length>0&&e.forEach((e=>{e.addEventListener("click",(()=>{toggleAllCheckboxes(!0),uiManager.hideBanner()}))}));const o=document.querySelectorAll("[cta='deny']");o.length>0&&o.forEach((e=>{e.addEventListener("click",(()=>{toggleAllCheckboxes(!1),uiManager.hideBanner()}))}));const n=JSON.parse(cookieManager.getCookie("cta"))||{essential:!0,analytics:!1,marketing:!1,personalization:!1};toggleCheckboxAnimation("#cookie-marketing","marketing","marketing","marketing",n.marketing),toggleCheckboxAnimation("#cookie-analytics","analytics","analytics","analytics",n.analytics),toggleCheckboxAnimation("#cookie-personalization","personalization","personalization","personalization",n.personalization)}));